Loading required package: docopt
Loading required package: methods
Loading required package: plyr
Loading required package: dplyr

Attaching package: ‘dplyr’

The following objects are masked from ‘package:plyr’:

    arrange, count, desc, failwith, id, mutate, rename, summarise,
    summarize

The following objects are masked from ‘package:stats’:

    filter, lag

The following objects are masked from ‘package:base’:

    intersect, setdiff, setequal, union

Loading required package: tidyr
Loading required package: lme4
Loading required package: Matrix

Attaching package: ‘Matrix’

The following object is masked from ‘package:tidyr’:

    expand

Loading required package: rstan
Loading required package: ggplot2
rstan (Version 2.9.0-3, packaged: 2016-02-11 15:54:41 UTC, GitRev: 05c3d0058b6a)
For execution on a local, multicore CPU with excess RAM we recommend calling
rstan_options(auto_write = TRUE)
options(mc.cores = parallel::detectCores())

Attaching package: ‘rstan’

The following object is masked from ‘package:tidyr’:

    extract

Loading required package: foreach
Loading required package: doParallel
Loading required package: iterators
Loading required package: parallel
Loading required package: survey
Loading required package: grid

Attaching package: ‘survey’

The following object is masked from ‘package:graphics’:

    dotchart

List of 4
 $ simno       : chr "2"
 $ use_sizes   : chr "0"
 $ outcome_type: chr "continuous"
 $ numclusters : chr "100"
NULL
[1] "simno"        "use_sizes"    "outcome_type" "numclusters" 
[1] "Assigning 2 to simno"
[1] "Assigning 0 to use_sizes"
[1] "Assigning continuous to outcome_type"
[1] "Assigning 100 to numclusters"
[1] "use sizes, outcome type: 0 continuous"
Running in parallel for 5 clusters, 0.05 units, use_sizes = 0 , and continuous outcomes.
Sampling data
[1] "2016-11-17 22:34:59 EST"
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = cluster_inds_only, num.clusters = 5, num.units = 0.05"
[1] "2016-11-17 22:35:00 EST"
[1] "making stan data"
[1] "2016-11-17 22:35:00 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 5, num.units = 5pct, model cluster_inds_only"
[1] "2016-11-17 22:35:00 EST"

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.51 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                0.53 seconds (Total)
# 

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.09 seconds (Warm-up)
#                0.01 seconds (Sampling)
#                0.1 seconds (Total)
# 

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.59 seconds (Warm-up)
#                0.04 seconds (Sampling)
#                0.63 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 3
                                                                                count
Exception thrown at line 44: normal_log: Scale parameter is 0, but must be > 0!     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.11 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                0.13 seconds (Total)
# 
[1] "done fitting stan model"
[1] "2016-11-17 22:35:02 EST"
[1] "done making samps"
[1] "2016-11-17 22:35:02 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:35:03 EST"
[1] "making par.ests"
[1] "2016-11-17 22:35:03 EST"
[1] "printing results"
[1] "2016-11-17 22:35:03 EST"
'data.frame':	6 obs. of  11 variables:
 $ param.name: Factor w/ 6 levels "alpha0","gamma0",..: 2 1 3 4 5 6
 $ mean      : num  0.2194 0.0213 0.2031 0.3243 0.3861 ...
 $ se_mean   : num  0.0363 0.0728 0.1181 0.1312 0.3077 ...
 $ sd        : num  0.0553 0.1051 0.1678 0.1866 0.4378 ...
 $ 2.5%      : num  0.15433 -0.08922 0.00548 0.17817 0.05938 ...
 $ 25%       : num  0.1721 -0.0519 0.0479 0.2043 0.1001 ...
 $ 50%       : num  0.20939 -0.00279 0.20317 0.23093 0.17703 ...
 $ 75%       : num  0.2713 0.0556 0.3477 0.3589 0.4539 ...
 $ 97.5%     : num  0.298 0.231 0.406 0.644 1.13 ...
 $ n_eff     : num  2.32 2.09 2.02 2.02 2.02 ...
 $ Rhat      : num  5.19 8.88 87.56 60.2 26.53 ...
NULL

     alpha0      gamma0 sigma_beta0 sigma_beta1     sigma_y    ybar_hat 
          1           1           1           1           1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 6 levels "alpha0","gamma0",..: 6
 $ mean      : num 0.256
 $ se_mean   : num 0.034
 $ sd        : num 0.0586
 $ 2.5%      : num 0.139
 $ 25%       : num 0.209
 $ 50%       : num 0.265
 $ 75%       : num 0.302
 $ 97.5%     : num 0.343
 $ n_eff     : num 2.98
 $ Rhat      : num 1.97
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.255511980142738"
[1] "ybar.hat.lci50: 0.209243400782698"
[1] "ybar.hat.uci50: 0.301848671820906"
[1] "ybar.hat.lci95: 0.138562536395499"
[1] "ybar.hat.uci95: 0.343092116240389"
########################################################
-----------------  use.sizes =  0 , stanmod =  cluster_inds_only , num.clusters =  5 , num.units =  0.05 ---------------------
true:  0.2532924 
est:  0.255512 
est 95% CI:  0.1385625 ,  0.3430921 
param posterior means: 
                  mean         2.5%     97.5%      Rhat    n_eff
gamma0      0.21941311  0.154326961 0.2981314  5.188073 2.320985
NA                  NA           NA        NA        NA       NA
alpha0      0.02125872 -0.089221260 0.2310299  8.875317 2.087474
NA.1                NA           NA        NA        NA       NA
sigma_beta0 0.20313671  0.005475771 0.4057168 87.561693 2.020538
sigma_beta1 0.32430537  0.178172304 0.6441713 60.200313 2.020936
sigma_y     0.38605146  0.059376182 1.1304282 26.533078 2.024125
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  618.0   786.0   845.0   831.6   930.0   979.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:35:04 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.256
 $ ybar.hat.lci50: num 0.209
 $ ybar.hat.uci50: num 0.302
 $ ybar.hat.lci95: num 0.139
 $ ybar.hat.uci95: num 0.343
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = knowsizes, num.clusters = 5, num.units = 0.05"
[1] "2016-11-17 22:35:04 EST"
[1] "making stan data"
[1] "2016-11-17 22:35:04 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 5, num.units = 5pct, model knowsizes"
[1] "2016-11-17 22:35:04 EST"

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.14 seconds (Warm-up)
#                3.72 seconds (Sampling)
#                4.86 seconds (Total)
# 

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.4 seconds (Warm-up)
#                3.97 seconds (Sampling)
#                5.37 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 2
                                                                                           count
Exception thrown at line 54: normal_log: Location parameter[1] is inf, but must be finite!     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.01 seconds (Warm-up)
#                0.46 seconds (Sampling)
#                1.47 seconds (Total)
# 

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.8 seconds (Warm-up)
#                3.91 seconds (Sampling)
#                5.71 seconds (Total)
# 
[1] "done fitting stan model"
[1] "2016-11-17 22:35:22 EST"
[1] "done making samps"
[1] "2016-11-17 22:35:22 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:35:24 EST"
[1] "making par.ests"
[1] "2016-11-17 22:35:24 EST"
[1] "printing results"
[1] "2016-11-17 22:35:24 EST"
'data.frame':	8 obs. of  11 variables:
 $ param.name: Factor w/ 8 levels "alpha0","alpha1",..: 3 4 1 2 5 6 7 8
 $ mean      : num  0.5066 -0.5445 0.0817 -0.1453 0.2933 ...
 $ se_mean   : num  0.0625 0.1446 0.097 0.1638 0.0306 ...
 $ sd        : num  0.287 0.554 0.404 0.751 0.155 ...
 $ 2.5%      : num  -0.224 -1.558 -0.766 -1.392 0.119 ...
 $ 25%       : num  0.394 -0.919 -0.184 -0.546 0.177 ...
 $ 50%       : num  0.494 -0.596 0.176 -0.335 0.258 ...
 $ 75%       : num  0.702 -0.264 0.406 0.344 0.372 ...
 $ 97.5%     : num  1.007 0.566 0.805 1.362 0.614 ...
 $ n_eff     : num  21.1 14.7 17.3 21 25.6 ...
 $ Rhat      : num  1.17 1.26 1.2 1.22 1.1 ...
NULL

     alpha0      alpha1      gamma0      gamma1 sigma_beta0 sigma_beta1 
          1           1           1           1           1           1 
    sigma_y    ybar_hat 
          1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 8 levels "alpha0","alpha1",..: 8
 $ mean      : num 0.4
 $ se_mean   : num 0.0368
 $ sd        : num 0.178
 $ 2.5%      : num -0.0605
 $ 25%       : num 0.328
 $ 50%       : num 0.429
 $ 75%       : num 0.52
 $ 97.5%     : num 0.641
 $ n_eff     : num 23.5
 $ Rhat      : num 1.17
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.400286327709302"
[1] "ybar.hat.lci50: 0.327875055129452"
[1] "ybar.hat.uci50: 0.519721518241955"
[1] "ybar.hat.lci95: -0.0605141723672649"
[1] "ybar.hat.uci95: 0.641016925829533"
########################################################
-----------------  use.sizes =  0 , stanmod =  knowsizes , num.clusters =  5 , num.units =  0.05 ---------------------
true:  0.2532924 
est:  0.4002863 
est 95% CI:  -0.06051417 ,  0.6410169 
param posterior means: 
                   mean        2.5%      97.5%     Rhat     n_eff
gamma0       0.50662835 -0.22410892 1.00738805 1.174903 21.076601
gamma1      -0.54453605 -1.55801691 0.56584185 1.256598 14.685982
alpha0       0.08168163 -0.76641014 0.80488055 1.196005 17.321169
alpha1      -0.14529849 -1.39155890 1.36200236 1.222735 21.038178
sigma_beta0  0.29329505  0.11946278 0.61441485 1.102860 25.583075
sigma_beta1  0.48147169  0.27676482 0.92981811 1.334681  6.610613
sigma_y      0.05304037  0.04841636 0.05734698 1.192824  8.123047
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  618.0   786.0   845.0   831.6   930.0   979.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:35:24 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.4
 $ ybar.hat.lci50: num 0.328
 $ ybar.hat.uci50: num 0.52
 $ ybar.hat.lci95: num -0.0605
 $ ybar.hat.uci95: num 0.641
NULL
##################################################################################
################.hat.uci95: num 0.641
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = bb, num.clusters = 5, num.units = 0.05"
[1] "2016-11-17 22:35:19 EST"
[1] "making stan data"
[1] "2016-11-17 22:35:19 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 5, num.units = 5pct, model bb"
[1] "2016-11-17 22:35:19 EST"

SAMPLING FOR MODEL 'bb' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, It
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 3.04 seconds (Warm-up)
#                5.57 seconds (Sampling)
#                8.61 seconds (Total)
# 

SAMPLING FOR MODEL 'bb' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 3.06 seconds (Warm-up)
#                5.75 seconds (Sampling)
#                8.81 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 2
                                                                                count
Exception thrown at line 69: normal_log: Scale parameter is 0, but must be > 0!     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'bb' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 2.41 seconds (Warm-up)
#                5.61 seconds (Sampling)
#                8.02 seconds (Total)
# 

SAMPLING FOR MODEL 'bb' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 2.6 seconds (Warm-up)
#                5.47 seconds (Sampling)
#                8.07 seconds (Total)
# 
[1] "done fitting stan model"
[1] "2016-11-17 22:35:58 EST"
[1] "done making samps"
[1] "2016-11-17 22:35:58 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:36:01 EST"
[1] "making par.ests"
[1] "2016-11-17 22:36:01 EST"
[1] "printing results"
[1] "2016-11-17 22:36:01 EST"
'data.frame':	24 obs. of  11 variables:
 $ param.name: Factor w/ 24 levels "alpha0","alpha1",..: 3 4 1 2 21 22 23 24 6 7 ...
 $ mean      : num  0.4385 -0.4004 0.0611 -0.0976 0.2812 ...
 $ se_mean   : num  0.0294 0.0485 0.0385 0.0776 0.0177 ...
 $ sd        : num  0.34 0.563 0.422 0.801 0.2 ...
 $ 2.5%      : num  -0.331 -1.361 -0.844 -1.669 0.114 ...
 $ 25%       : num  0.307 -0.736 -0.232 -0.639 0.164 ...
 $ 50%       : num  0.476 -0.4236 0.0549 -0.052 0.2226 ...
 $ 75%       : num  0.642 -0.139 0.369 0.452 0.329 ...
 $ 97.5%     : num  0.896 1.088 0.779 1.398 0.795 ...
 $ n_eff     : num  134 135 120 107 127 ...
 $ Rhat      : num  1.002 0.998 1.027 1.03 0.995 ...
NULL

     alpha0      alpha1      gamma0      gamma1  Mj_tot_est     n_star1 
          1           1           1           1           1           1 
    n_star2     n_star3     n_star4     n_star5   phi_star1   phi_star2 
          1           1           1           1           1           1 
  phi_star3   phi_star4   phi_star5        phi1        phi2        phi3 
          1           1           1           1           1           1 
       phi4        phi5 sigma_beta0 sigma_beta1     sigma_y    ybar_hat 
          1           1           1           1           1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 24 levels "alpha0","alpha1",..: 24
 $ mean      : num 0.444
 $ se_mean   : num 0.0265
 $ sd        : num 0.314
 $ 2.5%      : num -0.25
 $ 25%       : num 0.309
 $ 50%       : num 0.488
 $ 75%       : num 0.632
 $ 97.5%     : num 0.855
 $ n_eff     : num 141
 $ Rhat      : num 1
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.444443109280725"
[1] "ybar.hat.lci50: 0.30945259741076"
[1] "ybar.hat.uci50: 0.632181093923073"
[1] "ybar.hat.lci95: -0.249739526531003"
[1] "ybar.hat.uci95: 0.855161877465495"
########################################################
-----------------  use.sizes =  0 , stanmod =  bb , num.clusters =  5 , num.units =  0.05 ---------------------
true:  0.2532924 
est:  0.4444431 
est 95% CI:  -0.2497395 ,  0.8551619 
param posterior means: 
                   mean        2.5%      97.5%      Rhat    n_eff
gamma0       0.43847123 -0.33113190 0.89593009 1.0020566 133.5761
gamma1      -0.40038390 -1.36123485 1.08776136 0.9983964 134.7695
alpha0       0.06108902 -0.84355992 0.77857825 1.0272110 120.1929
alpha1      -0.09763533 -1.66890140 1.39847312 1.0300947 106.5699
sigma_beta0  0.28118154  0.11409778 0.79470587 0.9952387 127.3786
sigma_beta1  0.56479835  0.25494176 1.33523404 1.0211345 124.7646
sigma_y      0.05270129  0.04862319 0.05746254 0.9917627 173.3810
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  618.0   786.0   845.0   831.6   930.0   979.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:36:01 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.444
 $ ybar.hat.lci50: num 0.309
 $ ybar.hat.uci50: num 0.632
 $ ybar.hat.lci95: num -0.25
 $ ybar.hat.uci95: num 0.855
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = negbin, num.clusters = 5, num.units = 0.05"
[1] "2016-11-17 22:36:01 EST"
[1] "making stan data"
[1] "2016-11-17 22:36:01 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 5, num.units = 5pct, model negbin"
[1] "2016-11-17 22:36:01 EST"

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.06 seconds (Warm-up)
#                0.03 seconds (Sampling)
#                0.09 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 1
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     5
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.04 seconds (Warm-up)
#                4.37 seconds (Sampling)
#                4.41 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 2
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     4
Exception thrown at line 67: normal_log: Scale parameter is 0, but must be > 0!                     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.07 seconds (Warm-up)
#                2.55 seconds (Sampling)
#                2.62 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 3
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     2
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.04 seconds (Warm-up)
#                2.68 seconds (Sampling)
#                2.72 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 4
                                                                                count
Exception thrown at line 67: normal_log: Scale parameter is 0, but must be > 0!     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.
[1] "done fitting stan model"
[1] "2016-11-17 22:36:11 EST"
[1] "done making samps"
[1] "2016-11-17 22:36:11 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:36:14 EST"
[1] "making par.ests"
[1] "2016-11-17 22:36:14 EST"
[1] "printing results"
[1] "2016-11-17 22:36:14 EST"
'data.frame':	13 obs. of  11 variables:
 $ param.name: Factor w/ 13 levels "alpha0","alpha1",..: 3 4 1 2 10 11 12 13 7 9 ...
 $ mean      : num  0.2679 -0.2152 -0.0812 -0.3282 1.5193 ...
 $ se_mean   : num  0.116 0.423 0.669 0.315 0.427 ...
 $ sd        : num  0.424 0.944 1.101 0.881 1.15 ...
 $ 2.5%      : num  -0.751 -1.788 -1.608 -1.754 0.112 ...
 $ 25%       : num  -0.0476 -0.9673 -1.1201 -1.0687 0.3629 ...
 $ 50%       : num  0.347 0.104 0.024 -0.169 1.476 ...
 $ 75%       : num  0.571 0.192 0.587 0.166 2.395 ...
 $ 97.5%     : num  0.951 1.307 1.988 1.357 3.742 ...
 $ n_eff     : num  13.35 4.98 2.71 7.81 7.25 ...
 $ Rhat      : num  1.3 2.12 3.49 1.69 3.29 ...
NULL

     alpha0      alpha1      gamma0      gamma1  Mj_tot_est          mu 
          1           1           1           1           1           1 
    mu_star         phi    phi_star sigma_beta0 sigma_beta1     sigma_y 
          1           1           1           1           1           1 
   ybar_hat 
          1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 13 levels "alpha0","alpha1",..: 13
 $ mean      : num -0.549
 $ se_mean   : num 1.43
 $ sd        : num 3.92
 $ 2.5%      : num -10.8
 $ 25%       : num -0.16
 $ 50%       : num 0.266
 $ 75%       : num 0.879
 $ 97.5%     : num 5.2
 $ n_eff     : num 7.5
 $ Rhat      : num 1.85
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: -0.5492787823248"
[1] "ybar.hat.lci50: -0.160298677272987"
[1] "ybar.hat.uci50: 0.878681139296443"
[1] "ybar.hat.lci95: -10.8050826717337"
[1] "ybar.hat.uci95: 5.19884320744569"
########################################################
-----------------  use.sizes =  0 , stanmod =  negbin , num.clusters =  5 , num.units =  0.05 ---------------------
true:  0.2532924 
est:  -0.5492788 
est 95% CI:  -10.80508 ,  5.198843 
param posterior means: 
                   mean        2.5%     97.5%     Rhat     n_eff
gamma0       0.26789954 -0.75148997 0.9508733 1.295845 13.345142
gamma1      -0.21515874 -1.78773470 1.3069530 2.118265  4.979094
alpha0      -0.08118484 -1.60799548 1.9877231 3.485654  2.709000
alpha1      -0.32818732 -1.75357408 1.3572623 1.685472  7.811314
sigma_beta0  1.51933244  0.11189056 3.7421290 3.289461  7.246324
sigma_beta1  1.38014033  0.28519693 3.1125274 1.883162  4.102361
sigma_y      0.43201222  0.04870567 3.0397349 1.145928 23.065539
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  618.0   786.0   845.0   831.6   930.0   979.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:36:14 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num -0.549
 $ ybar.hat.lci50: num -0.16
 $ ybar.hat.uci50: num 0.879
 $ ybar.hat.lci95: num -10.8
 $ ybar.hat.uci95: num 5.2
NULL
##################################################################################
[1] "Running lmer_compare"
[1] "2016-11-17 22:36:14 EST"
[1] "IN LMER_COMPARE"
List of 7
 $ pop.data   :'data.frame':	56414 obs. of  8 variables:
  ..$ cluster.id     : int [1:56414] 6 6 6 6 6 6 6 6 6 6 ...
  ..$ yi             : num [1:56414] -0.82 -0.843 1.208 0.442 -1.233 ...
  ..$ xi             : num [1:56414] -9.48 -8.48 10.52 2.52 -12.48 ...
  ..$ Mj             : int [1:56414] 272 272 272 272 272 272 272 272 272 272 ...
  ..$ logMj_c        : num [1:56414] -0.592 -0.592 -0.592 -0.592 -0.592 ...
  ..$ unit.id        : int [1:56414] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ orig.cluster.id: int [1:56414] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ insample       : num [1:56414] 0 0 0 0 0 0 0 0 0 0 ...
 $ sample.data:'data.frame':	207 obs. of  7 variables:
  ..$ cluster.id     : int [1:207] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ yi             : num [1:207] 2.24 -1.417 0.677 -2.838 1.41 ...
  ..$ xi             : num [1:207] 7.52 -6.48 1.52 -12.48 4.52 ...
  ..$ Mj             : int [1:207] 786 786 786 786 786 786 786 786 786 786 ...
  ..$ logMj_c        : num [1:207] 0.47 0.47 0.47 0.47 0.47 ...
  ..$ unit.id        : int [1:207] 4 16 91 120 123 146 162 167 168 180 ...
  ..$ orig.cluster.id: int [1:207] 6 6 6 6 6 6 6 6 6 6 ...
 $ J          : num 100
 $ Mj         : int [1:100] 786 930 618 845 979 272 577 677 796 391 ...
 $ logMj_c    : num [1:100] 0.47 0.638 0.229 0.542 0.689 ...
 $ Mj_mis     : int [1:95] 272 577 677 796 391 798 159 464 990 262 ...
 $ xbar_pop   :'data.frame':	1 obs. of  1 variable:
  ..$ xbar: num 0.000196
NULL
[1] "pop.data"    "sample.data" "J"           "Mj"          "logMj_c"    
[6] "Mj_mis"      "xbar_pop"   
     gamma0 gamma1    alpha0 alpha1 sigma_beta0 sigma_beta1    sigma_y
1 0.2563723      0 0.1058495      0   0.1200998   0.4941622 0.05485978
Linear mixed model fit by REML ['lmerMod']
Formula: yi ~ xi + logMj_c + xi:logMj_c + (1 + xi | cluster.id)
   Data: sample.data

REML criterion at convergence: -549.9

Scaled residuals: 
     Min       1Q   Median       3Q      Max 
-3.01652 -0.59942 -0.06481  0.62387  2.78147 

Random effects:
 Groups     Name        Variance Std.Dev. Corr 
 cluster.id (Intercept) 0.034162 0.18483       
            xi          0.163411 0.40424  -0.84
 Residual               0.002733 0.05227       
Number of obs: 207, groups:  cluster.id, 5

Fixed effects:
            Estimate Std. Error t value
(Intercept)  0.63768    0.27629   2.308
xi          -0.02588    0.60354  -0.043
logMj_c     -0.75043    0.51336  -1.462
xi:logMj_c   0.11899    1.12150   0.106

Correlation of Fixed Effects:
           (Intr) xi     lgMj_c
xi         -0.837              
logMj_c    -0.954  0.798       
xi:logMj_c  0.798 -0.954 -0.837
Linear mixed model fit by REML ['lmerMod']
Formula: yi ~ xi + (1 + xi | cluster.id)
   Data: sample.data

REML criterion at convergence: -544.3

Scaled residuals: 
     Min       1Q   Median       3Q      Max 
-3.02606 -0.59920 -0.05549  0.62917  2.78707 

Random effects:
 Groups     Name        Variance Std.Dev. Corr 
 cluster.id (Intercept) 0.043875 0.20946       
            xi          0.123019 0.35074  -0.68
 Residual               0.002733 0.05227       
Number of obs: 207, groups:  cluster.id, 5

Fixed effects:
            Estimate Std. Error t value
(Intercept)  0.25233    0.09375   2.692
xi           0.03521    0.15686   0.224

Correlation of Fixed Effects:
   (Intr)
xi -0.678
'data.frame':	4 obs. of  5 variables:
 $ Estimate  : num  0.6377 -0.0259 -0.7504 0.119
 $ Std..Error: num  0.276 0.604 0.513 1.122
 $ t.value   : num  2.308 -0.0429 -1.4618 0.1061
 $ param.name: chr  "gamma0" "alpha0" "gamma1" "alpha1"
 $ truth     : num  0.256 0.106 0 0
NULL
'data.frame':	2 obs. of  5 variables:
 $ Estimate  : num  0.2523 0.0352
 $ Std..Error: num  0.0937 0.1569
 $ t.value   : num  2.692 0.224
 $ param.name: chr  "gamma0" "alpha0"
 $ truth     : num  0.256 0.106
NULL
[1] "######################################################################"
[1] "compare to lmer results:"
    param.name      truth        mean         sd              model.name
1       gamma0 0.25637231  0.63768438 0.27628971      with_cluster_sizes
2       alpha0 0.10584952 -0.02588369 0.60354259      with_cluster_sizes
3       gamma1 0.00000000 -0.75043464 0.51335931      with_cluster_sizes
4       alpha1 0.00000000  0.11898654 1.12150427      with_cluster_sizes
5  sigma_beta0 0.12009979  0.18483078         NA      with_cluster_sizes
6  sigma_beta1 0.49416224  0.40424185         NA      with_cluster_sizes
7      sigma_y 0.05485978  0.05227448         NA      with_cluster_sizes
8       gamma0 0.25637231  0.25232782 0.09374852 cluster_indicators_only
9       alpha0 0.10584952  0.03520730 0.15685679 cluster_indicators_only
10 sigma_beta0 0.12009979  0.20946242         NA cluster_indicators_only
11 sigma_beta1 0.49416224  0.35074048         NA cluster_indicators_only
12     sigma_y 0.05485978  0.05227467         NA cluster_indicators_only
          25%        75%        2.5%     97.5%
1   0.3613947  0.9139741  0.09615654 1.1792122
2  -0.6294263  0.5776589 -1.20882716 1.1570598
3  -1.2637940 -0.2370753 -1.75661889 0.2557496
4  -1.0025177  1.2404908 -2.07916183 2.3171349
5          NA         NA          NA        NA
6          NA         NA          NA        NA
7          NA         NA          NA        NA
8   0.1585793  0.3460763  0.06858073 0.4360749
9  -0.1216495  0.1920641 -0.27223201 0.3426466
10         NA         NA          NA        NA
11         NA         NA          NA        NA
12         NA         NA          NA        NA
[1] "######################################################################"
[1] "Running svy_ests"
[1] "2016-11-17 22:36:15 EST"
     gamma0 gamma1    alpha0 alpha1 sigma_beta0 sigma_beta1    sigma_y
1 0.2563723      0 0.1058495      0   0.1200998   0.4941622 0.05485978
List of 7
 $ pop.data   :'data.frame':	56414 obs. of  8 variables:
  ..$ cluster.id     : int [1:56414] 6 6 6 6 6 6 6 6 6 6 ...
  ..$ yi             : num [1:56414] -0.82 -0.843 1.208 0.442 -1.233 ...
  ..$ xi             : num [1:56414] -9.48 -8.48 10.52 2.52 -12.48 ...
  ..$ Mj             : int [1:56414] 272 272 272 272 272 272 272 272 272 272 ...
  ..$ logMj_c        : num [1:56414] -0.592 -0.592 -0.592 -0.592 -0.592 ...
  ..$ unit.id        : int [1:56414] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ orig.cluster.id: int [1:56414] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ insample       : num [1:56414] 0 0 0 0 0 0 0 0 0 0 ...
 $ sample.data:'data.frame':	207 obs. of  7 variables:
  ..$ cluster.id     : int [1:207] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ yi             : num [1:207] 2.24 -1.417 0.677 -2.838 1.41 ...
  ..$ xi             : num [1:207] 7.52 -6.48 1.52 -12.48 4.52 ...
  ..$ Mj             : int [1:207] 786 786 786 786 786 786 786 786 786 786 ...
  ..$ logMj_c        : num [1:207] 0.47 0.47 0.47 0.47 0.47 ...
  ..$ unit.id        : int [1:207] 4 16 91 120 123 146 162 167 168 180 ...
  ..$ orig.cluster.id: int [1:207] 6 6 6 6 6 6 6 6 6 6 ...
 $ J          : num 100
 $ Mj         : int [1:100] 786 930 618 845 979 272 577 677 796 391 ...
 $ logMj_c    : num [1:100] 0.47 0.638 0.229 0.542 0.689 ...
 $ Mj_mis     : int [1:95] 272 577 677 796 391 798 159 464 990 262 ...
 $ xbar_pop   :'data.frame':	1 obs. of  1 variable:
  ..$ xbar: num 0.000196
NULL
[1] "pop.data"    "sample.data" "J"           "Mj"          "logMj_c"    
[6] "Mj_mis"      "xbar_pop"   
[1] "**************************************************"
[1] "ybar true: 0.25"
[1] "HT estimate (se): 0.44 (0.19)"
[1] "GREG estimate (se): 0.44 (0.2)"
[1] "**************************************************"
[1] "##################################################################################"
[1] "##################################################################################"
[1] "saving results"
[1] "deleting sampled data"
Running in parallel for 10 clusters, 0.05 units, use_sizes = 0 , and continuous outcomes.
Sampling data
[1] "2016-11-17 22:36:15 EST"
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = cluster_inds_only, num.clusters = 10, num.units = 0.05"
[1] "2016-11-17 22:36:16 EST"
[1] "making stan data"
[1] "2016-11-17 22:36:16 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 10, num.units = 5pct, model cluster_inds_only"
[1] "2016-11-17 22:36:16 EST"

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 2.6 seconds (Warm-up)
#                0.18 seconds (Sampling)
#                2.78 seconds (Total)
# 

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.75 seconds (Warm-up)
#                4.6 seconds (Sampling)
#                6.35 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 2
                                                                                           count
Exception thrown at line 44: normal_log: Location parameter[1] is inf, but must be finite!     5
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.05 seconds (Warm-up)
#                0.03 seconds (Sampling)
#                1.08 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 3
                                                                                count
Exception thrown at line 44: normal_log: Scale parameter is 0, but must be > 0!     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.82 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                0.84 seconds (Total)
# 
[1] "done fitting stan model"
[1] "2016-11-17 22:36:28 EST"
[1] "done making samps"
[1] "2016-11-17 22:36:28 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:36:30 EST"
[1] "making par.ests"
[1] "2016-11-17 22:36:30 EST"
[1] "printing results"
[1] "2016-11-17 22:36:30 EST"
'data.frame':	6 obs. of  11 variables:
 $ param.name: Factor w/ 6 levels "alpha0","gamma0",..: 2 1 3 4 5 6
 $ mean      : num  0.2706 -0.0804 0.1554 0.5025 0.0681 ...
 $ se_mean   : num  0.0312 0.0736 0.0419 0.0345 0.0171 ...
 $ sd        : num  0.049 0.1177 0.0618 0.0695 0.0245 ...
 $ 2.5%      : num  0.214 -0.2008 0.0619 0.4167 0.0525 ...
 $ 25%       : num  0.2222 -0.1985 0.1025 0.426 0.0526 ...
 $ 50%       : num  0.2604 -0.1302 0.1236 0.5096 0.0542 ...
 $ 75%       : num  0.3381 -0.0556 0.2246 0.5335 0.0727 ...
 $ 97.5%     : num  0.344 0.177 0.248 0.71 0.114 ...
 $ n_eff     : num  2.46 2.56 2.18 4.06 2.05 ...
 $ Rhat      : num  2.62 2.04 3.79 1.36 10.69 ...
NULL

     alpha0      gamma0 sigma_beta0 sigma_beta1     sigma_y    ybar_hat 
          1           1           1           1           1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 6 levels "alpha0","gamma0",..: 6
 $ mean      : num 0.296
 $ se_mean   : num 0.0272
 $ sd        : num 0.0494
 $ 2.5%      : num 0.221
 $ 25%       : num 0.263
 $ 50%       : num 0.286
 $ 75%       : num 0.325
 $ 97.5%     : num 0.401
 $ n_eff     : num 3.3
 $ Rhat      : num 1.64
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.295508404392958"
[1] "ybar.hat.lci50: 0.262558203200308"
[1] "ybar.hat.uci50: 0.32524740927316"
[1] "ybar.hat.lci95: 0.220670351839762"
[1] "ybar.hat.uci95: 0.400917579591141"
########################################################
-----------------  use.sizes =  0 , stanmod =  cluster_inds_only , num.clusters =  10 , num.units =  0.05 ---------------------
true:  0.2532924 
est:  0.2955084 
est 95% CI:  0.2206704 ,  0.4009176 
param posterior means: 
                   mean        2.5%     97.5%      Rhat    n_eff
gamma0       0.27062928  0.21403910 0.3435401  2.622265 2.462813
NA                   NA          NA        NA        NA       NA
alpha0      -0.08042519 -0.20082385 0.1766323  2.035301 2.559395
NA.1                 NA          NA        NA        NA       NA
sigma_beta0  0.15535993  0.06191708 0.2475336  3.785879 2.177664
sigma_beta1  0.50249576  0.41665906 0.7101231  1.362400 4.058464
sigma_y      0.06811716  0.05250343 0.1141535 10.692343 2.051792
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  352.0   463.8   728.5   699.9   917.0   999.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:36:30 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.296
 $ ybar.hat.lci50: num 0.263
 $ ybar.hat.uci50: num 0.325
 $ ybar.hat.lci95: num 0.221
 $ ybar.hat.uci95: num 0.401
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = knowsizes, num.clusters = 10, num.units = 0.05"
[1] "2016-11-17 22:36:30 EST"
[1] "making stan data"
[1] "2016-11-17 22:36:30 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 10, num.units = 5pct, model knowsizes"
[1] "2016-11-17 22:36:30 EST"

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 3.01 seconds (Warm-up)
#                5.55 seconds (Sampling)
#                8.56 seconds (Total)
# 

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.57 seconds (Warm-up)
#                0.03 seconds (Sampling)
#                1.6 seconds (Total)
# 

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.73 seconds (Warm-up)
#                0.03 seconds (Sampling)
#                1.76 seconds (Total)
# 

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.08 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                1.1 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 4
                                                                                count
Exception thrown at line 54: normal_log: Scale parameter is 0, but must be > 0!     2
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.
[1] "done fitting stan model"
[1] "2016-11-17 22:36:43 EST"
[1] "done making samps"
[1] "2016-11-17 22:36:43 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:36:45 EST"
[1] "making par.ests"
[1] "2016-11-17 22:36:45 EST"
[1] "printing results"
[1] "2016-11-17 22:36:45 EST"
'data.frame':	8 obs. of  11 variables:
 $ param.name: Factor w/ 8 levels "alpha0","alpha1",..: 3 4 1 2 5 6 7 8
 $ mean      : num  0.2927 -0.158 -0.1071 0.4778 0.0849 ...
 $ se_mean   : num  0.00535 0.01253 0.0953 0.18108 0.03405 ...
 $ sd        : num  0.00927 0.01947 0.16207 0.30258 0.04866 ...
 $ 2.5%      : num  0.279385 -0.196132 -0.302361 0.022066 0.000164 ...
 $ 25%       : num  0.2843 -0.1701 -0.298 0.1278 0.0781 ...
 $ 50%       : num  0.293 -0.158 -0.138 0.477 0.099 ...
 $ 75%       : num  0.2982 -0.1353 0.0348 0.8395 0.1146 ...
 $ 97.5%     : num  0.313 -0.13 0.162 0.844 0.136 ...
 $ n_eff     : num  3 2.42 2.89 2.79 2.04 ...
 $ Rhat      : num  1.87 2.36 1.65 2.08 11.86 ...
NULL

     alpha0      alpha1      gamma0      gamma1 sigma_beta0 sigma_beta1 
          1           1           1           1           1           1 
    sigma_y    ybar_hat 
          1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 8 levels "alpha0","alpha1",..: 8
 $ mean      : num 0.274
 $ se_mean   : num 0.00135
 $ sd        : num 0.0189
 $ 2.5%      : num 0.238
 $ 25%       : num 0.261
 $ 50%       : num 0.274
 $ 75%       : num 0.286
 $ 97.5%     : num 0.311
 $ n_eff     : num 196
 $ Rhat      : num 1.01
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.274087104006978"
[1] "ybar.hat.lci50: 0.260692078972414"
[1] "ybar.hat.uci50: 0.285961543430773"
[1] "ybar.hat.lci95: 0.237836682821575"
[1] "ybar.hat.uci95: 0.310952828561255"
########################################################
-----------------  use.sizes =  0 , stanmod =  knowsizes , num.clusters =  10 , num.units =  0.05 ---------------------
true:  0.2532924 
est:  0.2740871 
est 95% CI:  0.2378367 ,  0.3109528 
param posterior means: 
                   mean          2.5%      97.5%      Rhat    n_eff
gamma0       0.29274555  0.2793852861  0.3129517  1.874965 3.000578
gamma1      -0.15804310 -0.1961316208 -0.1300339  2.359163 2.416500
alpha0      -0.10711842 -0.3023611190  0.1617820  1.647640 2.892330
alpha1       0.47781126  0.0220658656  0.8443588  2.077441 2.792174
sigma_beta0  0.08488150  0.0001636526  0.1360041 11.862567 2.041800
sigma_beta1  0.45107262  0.3306383764  0.6386748  1.815761 3.242955
sigma_y      0.07262154  0.0560444417  0.1271408  7.846620 2.049548
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  352.0   463.8   728.5   699.9   917.0   999.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:36:45 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.274
 $ ybar.hat.lci50: num 0.261
 $ ybar.hat.uci50: num 0.286
 $ ybar.hat.lci95: num 0.238
 $ ybar.hat.uci95: num 0.311
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = bb, num.clusters = 10, num.units = 0.05"
[1] "2016-11-17 22:36:45 EST"
[1] "making stan data"
[1] "2016-11-17 22:36:46 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 10, num.units = 5pct, model bb"
[1] "2016-11-17 22:36:46 EST"

SAMPLING FOR MODEL 'bb' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 2.37 seconds (Warm-up)
#                9.36 seconds (Sampling)
#                11.73 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 1
                                                                                count
Exception thrown at line 69: normal_log: Scale parameter is 0, but must be > 0!     2
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'bb' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 3.67 seconds (Warm-up)
#                9.16 seconds (Sampling)
#                12.83 seconds (Total)
# 

SAMPLING FOR MODEL 'bb' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 5.25 seconds (Warm-up)
#                9.5 seconds (Sampling)
#                14.75 seconds (Total)
# 

SAMPLING FOR MODEL 'bb' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 3.96 seconds (Warm-up)
#                8.76 seconds (Sampling)
#                12.72 seconds (Total)
# 
[1] "done fitting stan model"
[1] "2016-11-17 22:37:39 EST"
[1] "done making samps"
[1] "2016-11-17 22:37:39 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:37:42 EST"
[1] "making par.ests"
[1] "2016-11-17 22:37:42 EST"
[1] "printing results"
[1] "2016-11-17 22:37:42 EST"
'data.frame':	39 obs. of  11 variables:
 $ param.name: Factor w/ 39 levels "alpha0","alpha1",..: 3 4 1 2 36 37 38 39 6 8 ...
 $ mean      : num  0.3097 -0.2006 -0.0978 0.5891 0.1417 ...
 $ se_mean   : num  0.0049 0.00958 0.0142 0.03024 0.00285 ...
 $ sd        : num  0.0543 0.1188 0.2009 0.4277 0.038 ...
 $ 2.5%      : num  0.2104 -0.4219 -0.4384 -0.2864 0.0871 ...
 $ 25%       : num  0.27 -0.287 -0.24 0.289 0.114 ...
 $ 50%       : num  0.305 -0.1957 -0.0907 0.5936 0.1342 ...
 $ 75%       : num  0.3514 -0.1166 0.0346 0.8742 0.1641 ...
 $ 97.5%     : num  0.4121 0.0368 0.2917 1.3464 0.2267 ...
 $ n_eff     : num  123 154 200 200 177 ...
 $ Rhat      : num  1.017 1.012 0.989 0.983 1.01 ...
NULL

     alpha0      alpha1      gamma0      gamma1  Mj_tot_est     n_star1 
          1           1           1           1           1           1 
   n_star10     n_star2     n_star3     n_star4     n_star5     n_star6 
          1           1           1           1           1           1 
    n_star7     n_star8     n_star9   phi_star1  phi_star10   phi_star2 
          1           1           1           1           1           1 
  phi_star3   phi_star4   phi_star5   phi_star6   phi_star7   phi_star8 
          1           1           1           1           1           1 
  phi_star9        phi1       phi10        phi2        phi3        phi4 
          1           1           1           1           1           1 
       phi5        phi6        phi7        phi8        phi9 sigma_beta0 
          1           1           1           1           1           1 
sigma_beta1     sigma_y    ybar_hat 
          1           1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 39 levels "alpha0","alpha1",..: 39
 $ mean      : num 0.304
 $ se_mean   : num 0.00456
 $ sd        : num 0.0512
 $ 2.5%      : num 0.212
 $ 25%       : num 0.27
 $ 50%       : num 0.303
 $ 75%       : num 0.339
 $ 97.5%     : num 0.398
 $ n_eff     : num 126
 $ Rhat      : num 1.03
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.304201800429365"
[1] "ybar.hat.lci50: 0.26995299991625"
[1] "ybar.hat.uci50: 0.339444273204458"
[1] "ybar.hat.lci95: 0.21176299905762"
[1] "ybar.hat.uci95: 0.397528775753786"
########################################################
-----------------  use.sizes =  0 , stanmod =  bb , num.clusters =  10 , num.units =  0.05 ---------------------
true:  0.2532924 
est:  0.3042018 
est 95% CI:  0.211763 ,  0.3975288 
param posterior means: 
                   mean        2.5%      97.5%      Rhat     n_eff
gamma0       0.30969289  0.21043479 0.41214552 1.0171975 122.68850
gamma1      -0.20056548 -0.42185876 0.03678290 1.0117261 153.51360
alpha0      -0.09780767 -0.43839515 0.29173282 0.9891418 200.00000
alpha1       0.58908043 -0.28636712 1.34642185 0.9832395 200.00000
sigma_beta0  0.14172579  0.08711921 0.22672075 1.0095199 177.41619
sigma_beta1  0.52133771  0.30540690 0.89692402 1.0066284  99.09785
sigma_y      0.05579524  0.05188905 0.06023832 1.0219851 200.00000
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  352.0   463.8   728.5   699.9   917.0   999.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:37:42 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.304
 $ ybar.hat.lci50: num 0.27
 $ ybar.hat.uci50: num 0.339
 $ ybar.hat.lci95: num 0.212
 $ ybar.hat.uci95: num 0.398
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = negbin, num.clusters = 10, num.units = 0.05"
[1] "2016-11-17 22:37:42 EST"
[1] "making stan data"
[1] "2016-11-17 22:37:42 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 10, num.units = 5pct, model negbin"
[1] "2016-11-17 22:37:42 EST"

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.17 seconds (Warm-up)
#                7.63 seconds (Sampling)
#                7.8 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 1
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     3
Exception thrown at line 65: normal_log: Scale parameter is 0, but must be > 0!                     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.09 seconds (Warm-up)
#                0.05 seconds (Sampling)
#                0.14 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 2
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     4
Exception thrown at line 65: normal_log: Scale parameter is 0, but must be > 0!                     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.11 seconds (Warm-up)
#                5.37 seconds (Sampling)
#                5.48 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 3
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     4
Exception thrown at line 65: normal_log: Scale parameter is 0, but must be > 0!                     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.35 seconds (Warm-up)
#                7.6 seconds (Sampling)
#                7.95 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 4
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     3
Exception thrown at line 65: normal_log: Scale parameter is 0, but must be > 0!                     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.
[1] "done fitting stan model"
[1] "2016-11-17 22:38:04 EST"
[1] "done making samps"
[1] "2016-11-17 22:38:04 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:38:07 EST"
[1] "making par.ests"
[1] "2016-11-17 22:38:07 EST"
[1] "printing results"
[1] "2016-11-17 22:38:07 EST"
'data.frame':	13 obs. of  11 variables:
 $ param.name: Factor w/ 13 levels "alpha0","alpha1",..: 3 4 1 2 10 11 12 13 7 9 ...
 $ mean      : num  0.578 -0.234 -0.127 0.185 1.699 ...
 $ se_mean   : num  0.2536 0.0942 0.0934 0.2556 0.8584 ...
 $ sd        : num  0.434 0.419 0.356 0.55 2.135 ...
 $ 2.5%      : num  0.084 -2.244 -0.8405 -0.8006 0.0945 ...
 $ 25%       : num  0.29 -0.23 -0.272 -0.348 0.123 ...
 $ 50%       : num  0.342 -0.205 -0.159 0.211 0.187 ...
 $ 75%       : num  1.1828 -0.0875 0.0179 0.6482 3.6876 ...
 $ 97.5%     : num  1.273 0.242 0.932 1.21 7.271 ...
 $ n_eff     : num  2.93 19.8 14.5 4.63 6.19 ...
 $ Rhat      : num  2.03 1.16 1.2 1.55 1.88 ...
NULL

     alpha0      alpha1      gamma0      gamma1  Mj_tot_est          mu 
          1           1           1           1           1           1 
    mu_star         phi    phi_star sigma_beta0 sigma_beta1     sigma_y 
          1           1           1           1           1           1 
   ybar_hat 
          1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 13 levels "alpha0","alpha1",..: 13
 $ mean      : num -0.34
 $ se_mean   : num 0.368
 $ sd        : num 2.12
 $ 2.5%      : num -7.9
 $ 25%       : num -0.0329
 $ 50%       : num 0.129
 $ 75%       : num 0.261
 $ 97.5%     : num 1.72
 $ n_eff     : num 33.2
 $ Rhat      : num 1.1
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: -0.340410013164344"
[1] "ybar.hat.lci50: -0.0329332252020416"
[1] "ybar.hat.uci50: 0.261487124886581"
[1] "ybar.hat.lci95: -7.90394932966623"
[1] "ybar.hat.uci95: 1.72452736932847"
########################################################
-----------------  use.sizes =  0 , stanmod =  negbin , num.clusters =  10 , num.units =  0.05 ---------------------
true:  0.2532924 
est:  -0.34041 
est 95% CI:  -7.903949 ,  1.724527 
param posterior means: 
                  mean        2.5%      97.5%     Rhat     n_eff
gamma0       0.5779686  0.08404121  1.2727440 2.025113  2.929757
gamma1      -0.2337510 -2.24397938  0.2423141 1.159712 19.795629
alpha0      -0.1270267 -0.84054897  0.9323252 1.196844 14.498394
alpha1       0.1846587 -0.80058031  1.2104690 1.546935  4.625501
sigma_beta0  1.6990990  0.09452522  7.2714907 1.884947  6.188447
sigma_beta1  0.6490051  0.30815834  1.5301410 1.335510 15.416874
sigma_y      4.1423480  0.05177646 14.3288962 4.785199  2.202651
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  352.0   463.8   728.5   699.9   917.0   999.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:38:07 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num -0.34
 $ ybar.hat.lci50: num -0.0329
 $ ybar.hat.uci50: num 0.261
 $ ybar.hat.lci95: num -7.9
 $ ybar.hat.uci95: num 1.72
NULL
##################################################################################
[1] "Running lmer_compare"
[1] "2016-11-17 22:38:07 EST"
[1] "IN LMER_COMPARE"
List of 7
 $ pop.data   :'data.frame':	56414 obs. of  8 variables:
  ..$ cluster.id     : int [1:56414] 11 11 11 11 11 11 11 11 11 11 ...
  ..$ yi             : num [1:56414] -0.82 -0.843 1.208 0.442 -1.233 ...
  ..$ xi             : num [1:56414] -9.48 -8.48 10.52 2.52 -12.48 ...
  ..$ Mj             : int [1:56414] 272 272 272 272 272 272 272 272 272 272 ...
  ..$ logMj_c        : num [1:56414] -0.592 -0.592 -0.592 -0.592 -0.592 ...
  ..$ unit.id        : int [1:56414] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ orig.cluster.id: int [1:56414] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ insample       : num [1:56414] 0 0 0 0 0 0 0 0 0 0 ...
 $ sample.data:'data.frame':	350 obs. of  7 variables:
  ..$ cluster.id     : int [1:350] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ yi             : num [1:350] 1.158 4.859 -5.683 4.15 0.729 ...
  ..$ xi             : num [1:350] 1.517 8.517 -11.483 7.517 0.517 ...
  ..$ Mj             : int [1:350] 577 577 577 577 577 577 577 577 577 577 ...
  ..$ logMj_c        : num [1:350] 0.16 0.16 0.16 0.16 0.16 ...
  ..$ unit.id        : int [1:350] 6 24 26 34 57 75 107 140 151 169 ...
  ..$ orig.cluster.id: int [1:350] 2 2 2 2 2 2 2 2 2 2 ...
 $ J          : num 100
 $ Mj         : int [1:100] 577 352 381 426 845 920 612 908 979 999 ...
 $ logMj_c    : num [1:100] 0.16 -0.334 -0.255 -0.143 0.542 ...
 $ Mj_mis     : int [1:90] 272 677 796 391 786 798 159 464 990 262 ...
 $ xbar_pop   :'data.frame':	1 obs. of  1 variable:
  ..$ xbar: num -0.00121
NULL
[1] "pop.data"    "sample.data" "J"           "Mj"          "logMj_c"    
[6] "Mj_mis"      "xbar_pop"   
     gamma0 gamma1    alpha0 alpha1 sigma_beta0 sigma_beta1    sigma_y
1 0.2563723      0 0.1058495      0   0.1200998   0.4941622 0.05485978
Linear mixed model fit by REML ['lmerMod']
Formula: yi ~ xi + logMj_c + xi:logMj_c + (1 + xi | cluster.id)
   Data: sample.data

REML criterion at convergence: -859.9

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-2.6256 -0.6532  0.0099  0.6327  2.7486 

Random effects:
 Groups     Name        Variance Std.Dev. Corr 
 cluster.id (Intercept) 0.013979 0.11823       
            xi          0.192585 0.43885  -0.32
 Residual               0.003081 0.05551       
Number of obs: 350, groups:  cluster.id, 10

Fixed effects:
            Estimate Std. Error t value
(Intercept)   0.3105     0.0465   6.677
xi           -0.1237     0.1716  -0.721
logMj_c      -0.1913     0.0966  -1.980
xi:logMj_c    0.6658     0.3569   1.865

Correlation of Fixed Effects:
           (Intr) xi     lgMj_c
xi         -0.321              
logMj_c    -0.590  0.189       
xi:logMj_c  0.189 -0.588 -0.321
Linear mixed model fit by REML ['lmerMod']
Formula: yi ~ xi + (1 + xi | cluster.id)
   Data: sample.data

REML criterion at convergence: -858.4

Scaled residuals: 
     Min       1Q   Median       3Q      Max 
-2.63065 -0.64811  0.01331  0.63033  2.74333 

Random effects:
 Groups     Name        Variance Std.Dev. Corr 
 cluster.id (Intercept) 0.018557 0.13622       
            xi          0.245632 0.49561  -0.54
 Residual               0.003081 0.05551       
Number of obs: 350, groups:  cluster.id, 10

Fixed effects:
            Estimate Std. Error t value
(Intercept)  0.25623    0.04320   5.931
xi           0.06463    0.15673   0.412

Correlation of Fixed Effects:
   (Intr)
xi -0.535
'data.frame':	4 obs. of  5 variables:
 $ Estimate  : num  0.31 -0.124 -0.191 0.666
 $ Std..Error: num  0.0465 0.1716 0.0966 0.357
 $ t.value   : num  6.677 -0.721 -1.98 1.865
 $ param.name: chr  "gamma0" "alpha0" "gamma1" "alpha1"
 $ truth     : num  0.256 0.106 0 0
NULL
'data.frame':	2 obs. of  5 variables:
 $ Estimate  : num  0.2562 0.0646
 $ Std..Error: num  0.0432 0.1567
 $ t.value   : num  5.931 0.412
 $ param.name: chr  "gamma0" "alpha0"
 $ truth     : num  0.256 0.106
NULL
[1] "######################################################################"
[1] "compare to lmer results:"
    param.name      truth        mean         sd              model.name
1       gamma0 0.25637231  0.31045727 0.04649536      with_cluster_sizes
2       alpha0 0.10584952 -0.12373536 0.17163133      with_cluster_sizes
3       gamma1 0.00000000 -0.19129240 0.09659869      with_cluster_sizes
4       alpha1 0.00000000  0.66579262 0.35695462      with_cluster_sizes
5  sigma_beta0 0.12009979  0.11823189         NA      with_cluster_sizes
6  sigma_beta1 0.49416224  0.43884518         NA      with_cluster_sizes
7      sigma_y 0.05485978  0.05551098         NA      with_cluster_sizes
8       gamma0 0.25637231  0.25622549 0.04320112 cluster_indicators_only
9       alpha0 0.10584952  0.06462843 0.15672725 cluster_indicators_only
10 sigma_beta0 0.12009979  0.13622473         NA cluster_indicators_only
11 sigma_beta1 0.49416224  0.49561293         NA cluster_indicators_only
12     sigma_y 0.05485978  0.05551076         NA cluster_indicators_only
           25%         75%        2.5%        97.5%
1   0.26396191  0.35695262  0.21932637  0.401588166
2  -0.29536669  0.04789598 -0.46013277  0.212662059
3  -0.28789109 -0.09469371 -0.38062583 -0.001958974
4   0.30883799  1.02274724 -0.03383845  1.365423683
5           NA          NA          NA           NA
6           NA          NA          NA           NA
7           NA          NA          NA           NA
8   0.21302437  0.29942661  0.17155130  0.340899679
9  -0.09209882  0.22135568 -0.24255698  0.371813845
10          NA          NA          NA           NA
11          NA          NA          NA           NA
12          NA          NA          NA           NA
[1] "######################################################################"
[1] "Running svy_ests"
[1] "2016-11-17 22:38:08 EST"
     gamma0 gamma1    alpha0 alpha1 sigma_beta0 sigma_beta1    sigma_y
1 0.2563723      0 0.1058495      0   0.1200998   0.4941622 0.05485978
List of 7
 $ pop.data   :'data.frame':	56414 obs. of  8 variables:
  ..$ cluster.id     : int [1:56414] 11 11 11 11 11 11 11 11 11 11 ...
  ..$ yi             : num [1:56414] -0.82 -0.843 1.208 0.442 -1.233 ...
  ..$ xi             : num [1:56414] -9.48 -8.48 10.52 2.52 -12.48 ...
  ..$ Mj             : int [1:56414] 272 272 272 272 272 272 272 272 272 272 ...
  ..$ logMj_c        : num [1:56414] -0.592 -0.592 -0.592 -0.592 -0.592 ...
  ..$ unit.id        : int [1:56414] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ orig.cluster.id: int [1:56414] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ insample       : num [1:56414] 0 0 0 0 0 0 0 0 0 0 ...
 $ sample.data:'data.frame':	350 obs. of  7 variables:
  ..$ cluster.id     : int [1:350] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ yi             : num [1:350] 1.158 4.859 -5.683 4.15 0.729 ...
  ..$ xi             : num [1:350] 1.517 8.517 -11.483 7.517 0.517 ...
  ..$ Mj             : int [1:350] 577 577 577 577 577 577 577 577 577 577 ...
  ..$ logMj_c        : num [1:350] 0.16 0.16 0.16 0.16 0.16 ...
  ..$ unit.id        : int [1:350] 6 24 26 34 57 75 107 140 151 169 ...
  ..$ orig.cluster.id: int [1:350] 2 2 2 2 2 2 2 2 2 2 ...
 $ J          : num 100
 $ Mj         : int [1:100] 577 352 381 426 845 920 612 908 979 999 ...
 $ logMj_c    : num [1:100] 0.16 -0.334 -0.255 -0.143 0.542 ...
 $ Mj_mis     : int [1:90] 272 677 796 391 786 798 159 464 990 262 ...
 $ xbar_pop   :'data.frame':	1 obs. of  1 variable:
  ..$ xbar: num -0.00121
NULL
[1] "pop.data"    "sample.data" "J"           "Mj"          "logMj_c"    
[6] "Mj_mis"      "xbar_pop"   
[1] "**************************************************"
[1] "ybar true: 0.25"
[1] "HT estimate (se): 0.14 (0.31)"
[1] "GREG estimate (se): 0.15 (0.21)"
[1] "**************************************************"
[1] "##################################################################################"
[1] "##################################################################################"
[1] "saving results"
[1] "deleting sampled data"
Running in parallel for 5 clusters, 0.1 units, use_sizes = 0 , and continuous outcomes.
Sampling data
[1] "2016-11-17 22:38:08 EST"
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = cluster_inds_only, num.clusters = 5, num.units = 0.1"
[1] "2016-11-17 22:38:09 EST"
[1] "making stan data"
[1] "2016-11-17 22:38:09 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 5, num.units = 10pct, model cluster_inds_only"
[1] "2016-11-17 22:38:09 EST"

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.31 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                0.33 seconds (Total)
# 

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.67 seconds (Warm-up)
#                0.01 seconds (Sampling)
#                0.68 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 2
                                                                                           count
Exception thrown at line 44: normal_log: Location parameter[1] is inf, but must be finite!     2
Exception thrown at line 44: normal_log: Scale parameter is 0, but must be > 0!                1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.4 seconds (Warm-up)
#                0 seconds (Sampling)
#                0.4 seconds (Total)
# 

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.33 seconds (Warm-up)
#                0.01 seconds (Sampling)
#                0.34 seconds (Total)
# 
[1] "done fitting stan model"
[1] "2016-11-17 22:38:12 EST"
[1] "done making samps"
[1] "2016-11-17 22:38:12 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:38:13 EST"
[1] "making par.ests"
[1] "2016-11-17 22:38:13 EST"
[1] "printing results"
[1] "2016-11-17 22:38:13 EST"
'data.frame':	6 obs. of  11 variables:
 $ param.name: Factor w/ 6 levels "alpha0","gamma0",..: 2 1 3 4 5 6
 $ mean      : num  0.19 0.445 0.243 0.321 0.26 ...
 $ se_mean   : num  0.0866 0.1427 0.1238 0.0837 0.2527 ...
 $ sd        : num  0.124 0.203 0.176 0.121 0.376 ...
 $ 2.5%      : num  0.0775 0.1602 0.1207 0.1015 0.0493 ...
 $ 25%       : num  0.0897 0.2956 0.1404 0.2299 0.0497 ...
 $ 50%       : num  0.1456 0.4717 0.1521 0.3375 0.0544 ...
 $ 75%       : num  0.213 0.603 0.245 0.434 0.232 ...
 $ 97.5%     : num  0.415 0.687 0.557 0.443 1.213 ...
 $ n_eff     : num  2.05 2.02 2.02 2.07 2.22 ...
 $ Rhat      : num  7.41 65.43 29.23 7.91 3.96 ...
NULL

     alpha0      gamma0 sigma_beta0 sigma_beta1     sigma_y    ybar_hat 
          1           1           1           1           1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 6 levels "alpha0","gamma0",..: 6
 $ mean      : num 0.203
 $ se_mean   : num 0.0869
 $ sd        : num 0.128
 $ 2.5%      : num 0.0625
 $ 25%       : num 0.102
 $ 50%       : num 0.164
 $ 75%       : num 0.232
 $ 97.5%     : num 0.478
 $ n_eff     : num 2.18
 $ Rhat      : num 3.4
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.203276363807234"
[1] "ybar.hat.lci50: 0.101717191895567"
[1] "ybar.hat.uci50: 0.232382267524101"
[1] "ybar.hat.lci95: 0.0624739827579505"
[1] "ybar.hat.uci95: 0.478205786753588"
########################################################
-----------------  use.sizes =  0 , stanmod =  cluster_inds_only , num.clusters =  5 , num.units =  0.1 ---------------------
true:  0.2532924 
est:  0.2032764 
est 95% CI:  0.06247398 ,  0.4782058 
param posterior means: 
                 mean       2.5%     97.5%      Rhat    n_eff
gamma0      0.1896655 0.07750239 0.4153438  7.413326 2.054188
NA                 NA         NA        NA        NA       NA
alpha0      0.4448036 0.16017312 0.6870777 65.428352 2.020721
NA.1               NA         NA        NA        NA       NA
sigma_beta0 0.2427828 0.12072868 0.5569388 29.232592 2.022489
sigma_beta1 0.3209461 0.10148854 0.4425125  7.914215 2.074128
sigma_y     0.2598262 0.04931260 1.2129429  3.957846 2.219500
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  140.0   412.0   475.0   536.4   810.0   845.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:38:13 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.203
 $ ybar.hat.lci50: num 0.102
 $ ybar.hat.uci50: num 0.232
 $ ybar.hat.lci95: num 0.0625
 $ ybar.hat.uci95: num 0.478
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = knowsizes, num.clusters = 5, num.units = 0.1"
[1] "2016-11-17 22:38:13 EST"
[1] "making stan data"
[1] "2016-11-17 22:38:13 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 5, num.units = 10pct, model knowsizes"
[1] "2016-11-17 22:38:14 EST"

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.17 seconds (Warm-up)
#                4.73 seconds (Sampling)
#                5.9 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 1
                                                                                            count
Exception thrown at line 54: normal_log: Location parameter[1] is -inf, but must be finite!     4
Exception thrown at line 54: normal_log: Location parameter[1] is inf, but must be finite!      1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.71 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                0.73 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 2
                                                                                count
Exception thrown at line 54: normal_log: Scale parameter is 0, but must be > 0!     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.29 seconds (Warm-up)
#                0.01 seconds (Sampling)
#                0.3 seconds (Total)
# 

SAMPLING FOR MODEL 'knowsizes' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.17 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                0.19 seconds (Total)
# 
[1] "done fitting stan model"
[1] "2016-11-17 22:38:21 EST"
[1] "done making samps"
[1] "2016-11-17 22:38:21 EST"
eration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.29 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                0.31 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 4
                                                                                count
Exception thrown at line 54: normal_log: Scale parameter is 0, but must be > 0!     2
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.
[1] "done saving stanfit object"
[1] "2016-11-17 22:37:28 EST"
[1] "done fitting stan model"
[1] "2016-11-17 22:37:28 EST"
[1] "done making samps"
[1] "2016-11-17 22:37:28 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:37:30 EST"
[1] "making par.ests"
[1] "2016-11-17 22:37:30 EST"
[1] "printing results"
[1] "2016-11-17 22:37:30 EST"
'data.frame':	8 obs. of  11 variables:
 $ param.name: Factor w/ 8 levels "alpha0","alpha1",..: 3 4 1 2 5 6 7 8
 $ mean      : num  0.283 -0.084 -0.227 0.698 0.112 ...
 $ se_mean   : num  0.0455 0.1369 0.3576 0.7363 0.0557 ...
 $ sd        : num  0.0768 0.2621 0.5109 1.0674 0.0915 ...
 $ 2.5%      : num  0.161 -0.479 -0.6836 -1.0919 0.0294 ...
 $ 25%       : num  0.1874 -0.2636 -0.5747 0.0127 0.0402 ...
 $ 50%       : num  0.3203 -0.2566 -0.4278 1.0958 0.0524 ...
 $ 75%       : num  0.3507 0.1847 0.0323 1.4367 0.1729 ...
 $ 97.5%     : num  0.385 0.534 0.645 1.988 0.32 ...
 $ n_eff     : num  2.86 3.66 2.04 2.1 2.7 ...
 $ Rhat      : num  1.75 1.47 10.67 7.31 1.9 ...
NULL

     alpha0      alpha1      gamma0      gamma1 sigma_beta0 sigma_beta1 
          1           1           1           1           1           1 
    sigma_y    ybar_hat 
          1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 8 levels "alpha0","alpha1",..: 8
 $ mean      : num 0.253
 $ se_mean   : num 0.00819
 $ sd        : num 0.0527
 $ 2.5%      : num 0.135
 $ 25%       : num 0.237
 $ 50%       : num 0.251
 $ 75%       : num 0.272
 $ 97.5%     : num 0.369
 $ n_eff     : num 41.4
 $ Rhat      : num 1.03
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.252877991084992"
[1] "ybar.hat.lci50: 0.237406960837513"
[1] "ybar.hat.uci50: 0.271855663266386"
[1] "ybar.hat.lci95: 0.135265267035569"
[1] "ybar.hat.uci95: 0.369184177144601"
########################################################
-----------------  use.sizes =  0 , stanmod =  knowsizes , num.clusters =  5 , num.units =  0.1 ---------------------
true:  0.2532924 
est:  0.252878 
est 95% CI:  0.1352653 ,  0.3691842 
param posterior means: 
                   mean        2.5%     97.5%      Rhat    n_eff
gamma0       0.28347164  0.16096905 0.3851392  1.749719 2.856648
gamma1      -0.08404446 -0.47896019 0.5337688  1.470979 3.663319
alpha0      -0.22690096 -0.68361579 0.6452343 10.672926 2.041711
alpha1       0.69818267 -1.09194576 1.9880352  7.311953 2.101307
sigma_beta0  0.11190922  0.02940575 0.3201937  1.901857 2.702706
sigma_beta1  0.55628651  0.10630738 1.7103418 17.714855 2.027698
sigma_y      0.07195635  0.05220740 0.1177784 24.381244 2.022913
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  493.0   509.0   556.0   628.8   759.0   827.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:37:30 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.253
 $ ybar.hat.lci50: num 0.237
 $ ybar.hat.uci50: num 0.272
 $ ybar.hat.lci95: num 0.135
 $ ybar.hat.uci95: num 0.369
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = bb, num.clusters = 5, num.units = 0.1"
[1] "2016-11-17 22:37:30 EST"
[1] "making stan data"
[1] "2016-11-17 22:37:30 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 5, num.units = 10pct, model bb"
[1] "2016-11-17 22:37:30 EST"

SAMPLING FOR MODEL 'bb' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 2.52 seconds (Warm-up)
#                5.87 seconds (Sampling)
#                8.39 seconds (Total)
# 

SAMPLING FOR MODEL 'bb' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.7 seconds (Warm-up)
#                0.03 seconds (Sampling)
#                1.73 seconds (Total)
# 

SAMPLING FOR MODEL 'bb' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 2.04 seconds (Warm-up)
#                5.75 seconds (Sampling)
#                7.79 seconds (Total)
# 

SAMPLING FOR MODEL 'bb' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 3.19 seconds (Warm-up)
#                5.65 seconds (Sampling)
#                8.84 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 4
                                                                                count
Exception thrown at line 69: normal_log: Scale parameter is 0, but must be > 0!     1
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.
[1] "done saving stanfit object"
[1] "2016-11-17 22:37:58 EST"
[1] "done fitting stan model"
[1] "2016-11-17 22:37:58 EST"
[1] "done making samps"
[1] "2016-11-17 22:37:58 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:38:00 EST"
[1] "making par.ests"
[1] "2016-11-17 22:38:00 EST"
[1] "printing results"
[1] "2016-11-17 22:38:00 EST"
'data.frame':	24 obs. of  11 variables:
 $ param.name: Factor w/ 24 levels "alpha0","alpha1",..: 3 4 1 2 21 22 23 24 6 7 ...
 $ mean      : num  0.274 -0.114 -0.364 0.848 0.344 ...
 $ se_mean   : num  0.076 0.2593 0.1121 0.0653 0.1811 ...
 $ sd        : num  0.142 0.461 0.258 0.548 0.278 ...
 $ 2.5%      : num  0.0951 -0.8944 -0.7838 -0.3135 0.0717 ...
 $ 25%       : num  0.0994 -0.4759 -0.5602 0.5582 0.1322 ...
 $ 50%       : num  0.3 -0.209 -0.397 0.769 0.208 ...
 $ 75%       : num  0.361 0.49 -0.126 1.255 0.779 ...
 $ 97.5%     : num  0.5956 0.4944 0.0308 1.8494 0.7816 ...
 $ n_eff     : num  3.5 3.16 5.3 70.51 2.35 ...
 $ Rhat      : num  1.47 1.58 1.24 1.05 2.61 ...
NULL

     alpha0      alpha1      gamma0      gamma1  Mj_tot_est     n_star1 
          1           1           1           1           1           1 
    n_star2     n_star3     n_star4     n_star5   phi_star1   phi_star2 
          1           1           1           1           1           1 
  phi_star3   phi_star4   phi_star5        phi1        phi2        phi3 
          1           1           1           1           1           1 
       phi4        phi5 sigma_beta0 sigma_beta1     sigma_y    ybar_hat 
          1           1           1           1           1           1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 24 levels "alpha0","alpha1",..: 24
 $ mean      : num 0.266
 $ se_mean   : num 0.0638
 $ sd        : num 0.129
 $ 2.5%      : num -0.00317
 $ 25%       : num 0.171
 $ 50%       : num 0.28
 $ 75%       : num 0.342
 $ 97.5%     : num 0.521
 $ n_eff     : num 4.09
 $ Rhat      : num 1.37
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: 0.266049988054193"
[1] "ybar.hat.lci50: 0.170896599649882"
[1] "ybar.hat.uci50: 0.341784016776461"
[1] "ybar.hat.lci95: -0.00316713226807163"
[1] "ybar.hat.uci95: 0.521065564202854"
########################################################
-----------------  use.sizes =  0 , stanmod =  bb , num.clusters =  5 , num.units =  0.1 ---------------------
true:  0.2532924 
est:  0.26605 
est 95% CI:  -0.003167132 ,  0.5210656 
param posterior means: 
                   mean        2.5%      97.5%     Rhat      n_eff
gamma0       0.27433428  0.09508395 0.59562119 1.469921   3.500586
gamma1      -0.11372003 -0.89442103 0.49443434 1.582244   3.161741
alpha0      -0.36444653 -0.78382850 0.03081674 1.243874   5.298901
alpha1       0.84840884 -0.31345484 1.84935091 1.053847  70.509994
sigma_beta0  0.34443151  0.07169504 0.78155462 2.609704   2.348398
sigma_beta1  0.35945799  0.11694735 0.86200614 1.020055 104.319145
sigma_y      0.05452275  0.05025064 0.05988283 1.049875 153.890771
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  493.0   509.0   556.0   628.8   759.0   827.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:38:00 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num 0.266
 $ ybar.hat.lci50: num 0.171
 $ ybar.hat.uci50: num 0.342
 $ ybar.hat.lci95: num -0.00317
 $ ybar.hat.uci95: num 0.521
NULL
##################################################################################
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = negbin, num.clusters = 5, num.units = 0.1"
[1] "2016-11-17 22:38:00 EST"
[1] "making stan data"
[1] "2016-11-17 22:38:00 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 5, num.units = 10pct, model negbin"
[1] "2016-11-17 22:38:00 EST"

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.04 seconds (Warm-up)
#                0.03 seconds (Sampling)
#                0.07 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 1
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     4
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.04 seconds (Warm-up)
#                0.46 seconds (Sampling)
#                0.5 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 2
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     3
Exception thrown at line 67: normal_log: Scale parameter is 0, but must be > 0!                     2
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.05 seconds (Warm-up)
#                1.62 seconds (Sampling)
#                1.67 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 3
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     4
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'negbin' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.05 seconds (Warm-up)
#                0.04 seconds (Sampling)
#                0.09 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 4
                                                                                                count
Exception thrown at line 68: neg_binomial_2_log: Location parameter is inf, but must be finite!     2
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.
[1] "done saving stanfit object"
[1] "2016-11-17 22:38:03 EST"
[1] "done fitting stan model"
[1] "2016-11-17 22:38:03 EST"
[1] "done making samps"
[1] "2016-11-17 22:38:03 EST"
[1] "done making par.ests"
[1] "2016-11-17 22:38:06 EST"
[1] "making par.ests"
[1] "2016-11-17 22:38:06 EST"
[1] "printing results"
[1] "2016-11-17 22:38:06 EST"
'data.frame':	13 obs. of  11 variables:
 $ param.name: Factor w/ 13 levels "alpha0","alpha1",..: 3 4 1 2 10 11 12 13 7 9 ...
 $ mean      : num  0.498 -0.099 0.318 0.565 1.792 ...
 $ se_mean   : num  0.804 0.85 0.6 0.962 1.211 ...
 $ sd        : num  1.193 1.232 0.887 1.412 1.723 ...
 $ 2.5%      : num  -0.98 -1.9 -1.21 -1.76 0.2 ...
 $ 25%       : num  -0.903 -0.737 -0.297 -0.934 0.851 ...
 $ 50%       : num  1.18732 -0.59239 0.00839 1.26092 1.09136 ...
 $ 75%       : num  1.635 0.974 1.192 1.435 2.566 ...
 $ 97.5%     : num  1.68 1.56 1.21 1.98 4.73 ...
 $ n_eff     : num  2.2 2.1 2.19 2.15 2.03 ...
 $ Rhat      : num  5.41 5.91 4.32 4.35 20.38 ...
NULL

     alpha0      alpha1      gamma0      gamma1  Mj_tot_est          mu 
          1           1           1           1           1           1 
    mu_star         phi    phi_star sigma_beta0 sigma_beta1     sigma_y 
          1           1           1           1           1           1 
   ybar_hat 
          1 
'data.frame':	1 obs. of  11 variables:
 $ param.name: Factor w/ 13 levels "alpha0","alpha1",..: 13
 $ mean      : num -1.12
 $ se_mean   : num 4.25
 $ sd        : num 6.26
 $ 2.5%      : num -15.2
 $ 25%       : num -3.04
 $ 50%       : num 0.454
 $ 75%       : num 3.81
 $ 97.5%     : num 6.29
 $ n_eff     : num 2.17
 $ Rhat      : num 3.48
NULL
[1] "ybar.true: 0.253292421140171"
[1] "ybar.hat: -1.12359288806154"
[1] "ybar.hat.lci50: -3.03904678758634"
[1] "ybar.hat.uci50: 3.81082355569301"
[1] "ybar.hat.lci95: -15.1592264517906"
[1] "ybar.hat.uci95: 6.29047579491983"
########################################################
-----------------  use.sizes =  0 , stanmod =  negbin , num.clusters =  5 , num.units =  0.1 ---------------------
true:  0.2532924 
est:  -1.123593 
est 95% CI:  -15.15923 ,  6.290476 
param posterior means: 
                   mean        2.5%    97.5%      Rhat    n_eff
gamma0       0.49793318 -0.98005210 1.675017  5.409505 2.199886
gamma1      -0.09901172 -1.89555695 1.555770  5.909736 2.098725
alpha0       0.31753752 -1.20843808 1.208334  4.323196 2.185473
alpha1       0.56486527 -1.75752048 1.983880  4.345555 2.154170
sigma_beta0  1.79193094  0.19977523 4.732049 20.378550 2.025814
sigma_beta1  1.39200959  0.15984058 2.211080  2.116887 3.457288
sigma_y      3.54566207  0.05236131 7.252051  3.534440 3.326917
summary of Mj_sam: 
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  493.0   509.0   556.0   628.8   759.0   827.0 
summary of Mj_unsamp posterior means:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
                                                
########################################################
[1] "saving results"
[1] "2016-11-17 22:38:06 EST"
'data.frame':	1 obs. of  6 variables:
 $ ybar.true     : num 0.253
 $ ybar.hat      : num -1.12
 $ ybar.hat.lci50: num -3.04
 $ ybar.hat.uci50: num 3.81
 $ ybar.hat.lci95: num -15.2
 $ ybar.hat.uci95: num 6.29
NULL
##################################################################################
[1] "Running lmer_compare"
[1] "2016-11-17 22:38:06 EST"
[1] "IN LMER_COMPARE"
List of 7
 $ pop.data   :'data.frame':	56414 obs. of  8 variables:
  ..$ cluster.id     : int [1:56414] 6 6 6 6 6 6 6 6 6 6 ...
  ..$ yi             : num [1:56414] -0.82 -0.843 1.208 0.442 -1.233 ...
  ..$ xi             : num [1:56414] -9.48 -8.48 10.52 2.52 -12.48 ...
  ..$ Mj             : int [1:56414] 272 272 272 272 272 272 272 272 272 272 ...
  ..$ logMj_c        : num [1:56414] -0.592 -0.592 -0.592 -0.592 -0.592 ...
  ..$ unit.id        : int [1:56414] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ orig.cluster.id: int [1:56414] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ insample       : num [1:56414] 0 0 0 0 0 0 0 0 0 0 ...
 $ sample.data:'data.frame':	315 obs. of  7 variables:
  ..$ cluster.id     : int [1:315] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ yi             : num [1:315] -3.15 -1.19 -2.62 -3.12 -3.31 ...
  ..$ xi             : num [1:315] -12.48 -5.48 -10.48 -12.48 -12.48 ...
  ..$ Mj             : int [1:315] 759 759 759 759 759 759 759 759 759 759 ...
  ..$ logMj_c        : num [1:315] 0.435 0.435 0.435 0.435 0.435 ...
  ..$ unit.id        : int [1:315] 5 14 23 32 33 40 48 49 59 62 ...
  ..$ orig.cluster.id: int [1:315] 28 28 28 28 28 28 28 28 28 28 ...
 $ J          : num 100
 $ Mj         : int [1:100] 759 556 827 493 509 272 577 677 796 391 ...
 $ logMj_c    : num [1:100] 0.43455 0.12331 0.52035 0.00305 0.03499 ...
 $ Mj_mis     : int [1:95] 272 577 677 796 391 786 798 159 464 990 ...
 $ xbar_pop   :'data.frame':	1 obs. of  1 variable:
  ..$ xbar: num -0.000691
NULL
[1] "pop.data"    "sample.data" "J"           "Mj"          "logMj_c"    
[6] "Mj_mis"      "xbar_pop"   
     gamma0 gamma1    alpha0 alpha1 sigma_beta0 sigma_beta1    sigma_y
1 0.2563723      0 0.1058495      0   0.1200998   0.4941622 0.05485978
Linear mixed model fit by REML ['lmerMod']
Formula: yi ~ xi + logMj_c + xi:logMj_c + (1 + xi | cluster.id)
   Data: sample.data

REML criterion at convergence: -854.1

Scaled residuals: 
     Min       1Q   Median       3Q      Max 
-2.68860 -0.65181  0.03217  0.61683  2.51656 

Random effects:
 Groups     Name        Variance Std.Dev. Corr
 cluster.id (Intercept) 0.013351 0.11555      
            xi          0.033701 0.18358  0.56
 Residual               0.002984 0.05462      
Number of obs: 315, groups:  cluster.id, 5

Fixed effects:
            Estimate Std. Error t value
(Intercept)  0.34284    0.07503   4.570
xi          -0.56394    0.11894  -4.742
logMj_c     -0.29840    0.24304  -1.228
xi:logMj_c   1.40962    0.38546   3.657

Correlation of Fixed Effects:
           (Intr) xi     lgMj_c
xi          0.559              
logMj_c    -0.724 -0.405       
xi:logMj_c -0.405 -0.724  0.559
Linear mixed model fit by REML ['lmerMod']
Formula: yi ~ xi + (1 + xi | cluster.id)
   Data: sample.data

REML criterion at convergence: -846.4

Scaled residuals: 
     Min       1Q   Median       3Q      Max 
-2.68577 -0.65194  0.02411  0.61452  2.52207 

Random effects:
 Groups     Name        Variance Std.Dev. Corr 
 cluster.id (Intercept) 0.015067 0.12275       
            xi          0.137951 0.37142  -0.33
 Residual               0.002984 0.05462       
Number of obs: 315, groups:  cluster.id, 5

Fixed effects:
            Estimate Std. Error t value
(Intercept)  0.27619    0.05499   5.023
xi          -0.24924    0.16610  -1.501

Correlation of Fixed Effects:
   (Intr)
xi -0.327
'data.frame':	4 obs. of  5 variables:
 $ Estimate  : num  0.343 -0.564 -0.298 1.41
 $ Std..Error: num  0.075 0.119 0.243 0.385
 $ t.value   : num  4.57 -4.74 -1.23 3.66
 $ param.name: chr  "gamma0" "alpha0" "gamma1" "alpha1"
 $ truth     : num  0.256 0.106 0 0
NULL
'data.frame':	2 obs. of  5 variables:
 $ Estimate  : num  0.276 -0.249
 $ Std..Error: num  0.055 0.166
 $ t.value   : num  5.02 -1.5
 $ param.name: chr  "gamma0" "alpha0"
 $ truth     : num  0.256 0.106
NULL
[1] "######################################################################"
[1] "compare to lmer results:"
    param.name      truth        mean         sd              model.name
1       gamma0 0.25637231  0.34284169 0.07502721      with_cluster_sizes
2       alpha0 0.10584952 -0.56393935 0.11893641      with_cluster_sizes
3       gamma1 0.00000000 -0.29839938 0.24304346      with_cluster_sizes
4       alpha1 0.00000000  1.40961665 0.38545952      with_cluster_sizes
5  sigma_beta0 0.12009979  0.11554789         NA      with_cluster_sizes
6  sigma_beta1 0.49416224  0.18357838         NA      with_cluster_sizes
7      sigma_y 0.05485978  0.05462337         NA      with_cluster_sizes
8       gamma0 0.25637231  0.27619442 0.05498632 cluster_indicators_only
9       alpha0 0.10584952 -0.24923889 0.16610366 cluster_indicators_only
10 sigma_beta0 0.12009979  0.12274661         NA cluster_indicators_only
11 sigma_beta1 0.49416224  0.37141772         NA cluster_indicators_only
12     sigma_y 0.05485978  0.05462302         NA cluster_indicators_only
          25%         75%       2.5%       97.5%
1   0.2678145  0.41786890  0.1957884  0.48989502
2  -0.6828758 -0.44500294 -0.7970547 -0.33082398
3  -0.5414428 -0.05535592 -0.7747646  0.17796581
4   1.0241571  1.79507617  0.6541160  2.16511731
5          NA          NA         NA          NA
6          NA          NA         NA          NA
7          NA          NA         NA          NA
8   0.2212081  0.33118074  0.1684212  0.38396760
9  -0.4153426 -0.08313523 -0.5748021  0.07632429
10         NA          NA         NA          NA
11         NA          NA         NA          NA
12         NA          NA         NA          NA
[1] "######################################################################"
[1] "Running svy_ests"
[1] "2016-11-17 22:38:06 EST"
     gamma0 gamma1    alpha0 alpha1 sigma_beta0 sigma_beta1    sigma_y
1 0.2563723      0 0.1058495      0   0.1200998   0.4941622 0.05485978
List of 7
 $ pop.data   :'data.frame':	56414 obs. of  8 variables:
  ..$ cluster.id     : int [1:56414] 6 6 6 6 6 6 6 6 6 6 ...
  ..$ yi             : num [1:56414] -0.82 -0.843 1.208 0.442 -1.233 ...
  ..$ xi             : num [1:56414] -9.48 -8.48 10.52 2.52 -12.48 ...
  ..$ Mj             : int [1:56414] 272 272 272 272 272 272 272 272 272 272 ...
  ..$ logMj_c        : num [1:56414] -0.592 -0.592 -0.592 -0.592 -0.592 ...
  ..$ unit.id        : int [1:56414] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ orig.cluster.id: int [1:56414] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ insample       : num [1:56414] 0 0 0 0 0 0 0 0 0 0 ...
 $ sample.data:'data.frame':	315 obs. of  7 variables:
  ..$ cluster.id     : int [1:315] 1 1 1 1 1 1 1 1 1 1 ...
  ..$ yi             : num [1:315] -3.15 -1.19 -2.62 -3.12 -3.31 ...
  ..$ xi             : num [1:315] -12.48 -5.48 -10.48 -12.48 -12.48 ...
  ..$ Mj             : int [1:315] 759 759 759 759 759 759 759 759 759 759 ...
  ..$ logMj_c        : num [1:315] 0.435 0.435 0.435 0.435 0.435 ...
  ..$ unit.id        : int [1:315] 5 14 23 32 33 40 48 49 59 62 ...
  ..$ orig.cluster.id: int [1:315] 28 28 28 28 28 28 28 28 28 28 ...
 $ J          : num 100
 $ Mj         : int [1:100] 759 556 827 493 509 272 577 677 796 391 ...
 $ logMj_c    : num [1:100] 0.43455 0.12331 0.52035 0.00305 0.03499 ...
 $ Mj_mis     : int [1:95] 272 577 677 796 391 786 798 159 464 990 ...
 $ xbar_pop   :'data.frame':	1 obs. of  1 variable:
  ..$ xbar: num -0.000691
NULL
[1] "pop.data"    "sample.data" "J"           "Mj"          "logMj_c"    
[6] "Mj_mis"      "xbar_pop"   
[1] "**************************************************"
[1] "ybar true: 0.25"
[1] "HT estimate (se): 0.01 (0.21)"
[1] "GREG estimate (se): 0.07 (0.18)"
[1] "**************************************************"
[1] "##################################################################################"
[1] "##################################################################################"
[1] "saving results"
[1] "deleting sampled data"
Running in parallel for 10 clusters, 0.1 units, use_sizes = 0 , and continuous outcomes.
Sampling data
[1] "2016-11-17 22:38:06 EST"
##################################################################################
##################################################################################
[1] "Starting to run use.sizes = 0, stanmod = cluster_inds_only, num.clusters = 10, num.units = 0.1"
[1] "2016-11-17 22:38:07 EST"
[1] "making stan data"
[1] "2016-11-17 22:38:07 EST"
[1] "***********************************************************************"
[1] "********** about to run stan for num.clusters = 10, num.units = 10pct, model cluster_inds_only"
[1] "2016-11-17 22:38:07 EST"

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 1).

Chain 1, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 1, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 1, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 1, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 1, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 1, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 1, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 1, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 1, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 1, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 1, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 1, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.77 seconds (Warm-up)
#                0.02 seconds (Sampling)
#                0.79 seconds (Total)
# 

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 2).

Chain 2, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 2, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 2, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 2, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 2, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 2, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 2, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 2, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 2, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 2, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 2, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 2, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.76 seconds (Warm-up)
#                0.03 seconds (Sampling)
#                0.79 seconds (Total)
# 

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 3).

Chain 3, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 3, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 3, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 3, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 3, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 3, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 3, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 3, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 3, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 3, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 3, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 3, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 1.7 seconds (Warm-up)
#                5.44 seconds (Sampling)
#                7.14 seconds (Total)
# 
The following numerical problems occured the indicated number of times after warmup on chain 3
                                                                                            count
Exception thrown at line 44: normal_log: Location parameter[1] is -inf, but must be finite!     2
When a numerical problem occurs, the Metropolis proposal gets rejected.
However, by design Metropolis proposals sometimes get rejected even when there are no numerical problems.
Thus, if the number in the 'count' column is small, do not ask about this message on stan-users.

SAMPLING FOR MODEL 'cluster_inds_only' NOW (CHAIN 4).

Chain 4, Iteration:  1 / 100 [  1%]  (Warmup)
Chain 4, Iteration: 10 / 100 [ 10%]  (Warmup)
Chain 4, Iteration: 20 / 100 [ 20%]  (Warmup)
Chain 4, Iteration: 30 / 100 [ 30%]  (Warmup)
Chain 4, Iteration: 40 / 100 [ 40%]  (Warmup)
Chain 4, Iteration: 50 / 100 [ 50%]  (Warmup)
Chain 4, Iteration: 51 / 100 [ 51%]  (Sampling)
Chain 4, Iteration: 60 / 100 [ 60%]  (Sampling)
Chain 4, Iteration: 70 / 100 [ 70%]  (Sampling)
Chain 4, Iteration: 80 / 100 [ 80%]  (Sampling)
Chain 4, Iteration: 90 / 100 [ 90%]  (Sampling)
Chain 4, Iteration: 100 / 100 [100%]  (Sampling)# 
#  Elapsed Time: 0.81 seconds (Warm-up)
#                0.03 seconds (Sampling)
#                0.84 seconds (Total)
# 
[1] "done saving stanfit object"
[1] "2016-11-17 22:38:18 EST"
[1] "done fitting stan model"
[1] "2016-11-17 22:38:18 EST"
[1] "done making samps"
[1] "2016-11-17 22:38:18 EST"
